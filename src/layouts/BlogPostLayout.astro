---
import BaseLayout from "./BaseLayout.astro";
import ArticleLayout from "./ArticleLayout.astro";
import formatDate from "../utils/format-date.js";
import GithubIssueComments from "svelte-github-issue-comments-component/GithubIssueComments/GithubIssueComments.svelte";

const { content } = Astro.props;

const { title, publishDate, description, permalink, issueUri, image } = content;
---

<BaseLayout
  head={{
    title: `${title} - joshuaj.co.uk`,
    description,
    permalink,
    image,
  }}
>
  <ArticleLayout>
    <Fragment slot="title">
      {title}
    </Fragment>

    <Fragment slot="subtitle">
      {formatDate(publishDate, "MMMM dd, yyyy")}
    </Fragment>

    <Fragment slot="content">
      <slot />
    </Fragment>

    <Fragment slot="footer">
      <GithubIssueComments
        {issueUri}
        commentsPerPage={10}
        useShowCommentsButton={false}
        client:visible
      />
    </Fragment>
  </ArticleLayout>
</BaseLayout>
