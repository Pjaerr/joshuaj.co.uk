---
import { getCollection } from "astro:content";
import BaseLayout from "../layouts/BaseLayout.astro";
import BlogPostList from "../components/BlogPostList.svelte";
import ProjectList from "../components/ProjectList.svelte";
import OtherList from "../components/OtherList.svelte";

const blogposts = await getCollection("blog");
---

<style lang="scss">
  @use "../styles/mixins";

  .container {
    @include mixins.centered;

    display: grid;
    grid-template-rows: auto auto;
    grid-gap: 48px;
  }

  hr {
    width: 100%;
    opacity: 0.25;
  }

  .section-heading {
    color: var(--colour-highlight);
    letter-spacing: 2px;
    font-size: 1.125rem;
    text-transform: uppercase;
  }

  .see-all-posts {
    display: inline-block;
    margin-top: 24px;
    font-weight: bold;
    font-size: 1.125rem;
    text-decoration: underline;
  }
</style>

<BaseLayout
  head={{
    title: "joshuaj.co.uk",
    description:
      "Frontend developer occasionally writing blogposts about JavaScript and friends",
    image: "/assets/cover_image.png",
    permalink: "https://joshuaj.co.uk",
  }}
>
  <div class="container">
    <div class="blogposts-section">
      <h2 class="section-heading">Blogposts</h2>
      <BlogPostList blogposts={blogposts.slice(0, 4)} />

      {
        blogposts.length > 5 && (
          <a class="see-all-posts" href="/blog">
            See all posts âžž
          </a>
        )
      }
    </div>

    <hr />

    <div class="projects-section">
      <h2 class="section-heading">Projects</h2>
      <ProjectList {projects} />
    </div>

    <hr />

    <div class="other-section">
      <h2 class="section-heading">Other Stuff</h2>

      <OtherList />
    </div>
  </div>
</BaseLayout>
