import{S as ie,i as re,s as ae,p as b,q as d,r as v,j as f,v as m,b as E,u as H,w as N,x as A,y as g,z as F,A as I,B as U,C as J,D as K,E as ce,F as Q,G as le,e as X}from"./chunks/chunk.73c83af7.js";const ue=r=>{const e=r.split(",").map(s=>{let i;const u=s.match(/\?\page=./g)?.[0].replace("?page=","");return u&&(i=parseInt(u,10)),{rel:/rel=".*"/g.exec(s)?.[0].replace('rel="',"").replace('"',""),page:i}}),l=e.find(({rel:s})=>s==="next")?.page,t=e.find(({rel:s})=>s==="previous")?.page,n=e.find(({rel:s})=>s==="first")?.page,o=e.find(({rel:s})=>s==="last")?.page;return{next:l,previous:t,first:n,last:o}};function Y(r,e,l){const t=r.slice();return t[16]=e[l],t[18]=l,t}function Z(r,e,l){const t=r.slice();return t[19]=e[l].user,t[20]=e[l].body,t[21]=e[l].createdAt,t}function me(r){let e,l,t,n;return{c(){e=b("button"),l=N("Show Comments"),this.h()},l(o){e=d(o,"BUTTON",{class:!0});var s=v(e);l=A(s,"Show Comments"),s.forEach(f),this.h()},h(){m(e,"class","github-issue-comments__show-comments-button svelte-1fblg6g")},m(o,s){E(o,e,s),g(e,l),t||(n=F(e,"click",r[14]),t=!0)},p:H,d(o){o&&f(e),t=!1,n()}}}function fe(r){let e,l,t,n,o;function s(c,_){return c[6]?_e:he}let i=s(r),u=i(r),a=r[1]&&se(r);return{c(){u.c(),e=I(),a&&a.c(),l=I(),t=b("a"),n=N("Write a Comment via Github"),this.h()},l(c){u.l(c),e=U(c),a&&a.l(c),l=U(c),t=d(c,"A",{class:!0,href:!0,target:!0,rel:!0});var _=v(t);n=A(_,"Write a Comment via Github"),_.forEach(f),this.h()},h(){m(t,"class","github-issue-comments__new-comment-button svelte-1fblg6g"),m(t,"href",o=`https://github.com/${r[0]}#issue-comment-box`),m(t,"target","_blank"),m(t,"rel","noopener noreferrer")},m(c,_){u.m(c,_),E(c,e,_),a&&a.m(c,_),E(c,l,_),E(c,t,_),g(t,n)},p(c,_){i===(i=s(c))&&u?u.p(c,_):(u.d(1),u=i(c),u&&(u.c(),u.m(e.parentNode,e))),c[1]?a?a.p(c,_):(a=se(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),_&1&&o!==(o=`https://github.com/${c[0]}#issue-comment-box`)&&m(t,"href",o)},d(c){u.d(c),c&&f(e),a&&a.d(c),c&&f(l),c&&f(t)}}}function he(r){let e;return{c(){e=b("div"),this.h()},l(l){e=d(l,"DIV",{class:!0}),v(e).forEach(f),this.h()},h(){m(e,"class","github-issue-comments__loading-icon svelte-1fblg6g")},m(l,t){E(l,e,t)},p:H,d(l){l&&f(e)}}}function _e(r){let e,l,t=r[5],n=[];for(let i=0;i<t.length;i+=1)n[i]=$(Z(r,t,i));let o=null;t.length||(o=x());let s=r[3]&&ee(r);return{c(){for(let i=0;i<n.length;i+=1)n[i].c();o&&o.c(),e=I(),s&&s.c(),l=X()},l(i){for(let u=0;u<n.length;u+=1)n[u].l(i);o&&o.l(i),e=U(i),s&&s.l(i),l=X()},m(i,u){for(let a=0;a<n.length;a+=1)n[a].m(i,u);o&&o.m(i,u),E(i,e,u),s&&s.m(i,u),E(i,l,u)},p(i,u){if(u&32){t=i[5];let a;for(a=0;a<t.length;a+=1){const c=Z(i,t,a);n[a]?n[a].p(c,u):(n[a]=$(c),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length,t.length?o&&(o.d(1),o=null):o||(o=x(),o.c(),o.m(e.parentNode,e))}i[3]?s?s.p(i,u):(s=ee(i),s.c(),s.m(l.parentNode,l)):s&&(s.d(1),s=null)},d(i){le(n,i),o&&o.d(i),i&&f(e),s&&s.d(i),i&&f(l)}}}function x(r){let e,l,t,n;return{c(){e=b("p"),l=N("No comments found "),t=b("span"),n=N("\u{1F641}"),this.h()},l(o){e=d(o,"P",{class:!0});var s=v(e);l=A(s,"No comments found "),t=d(s,"SPAN",{role:!0,"aria-label":!0});var i=v(t);n=A(i,"\u{1F641}"),i.forEach(f),s.forEach(f),this.h()},h(){m(t,"role","img"),m(t,"aria-label","Smiley Face Emoji"),m(e,"class","github-issue-comments__no-comments-found svelte-1fblg6g")},m(o,s){E(o,e,s),g(e,l),g(e,t),g(t,n)},d(o){o&&f(e)}}}function $(r){let e,l,t,n,o,s,i,u,a,c,_=r[19].username+"",S,T,C,R=" ",B,O,D=new Date(r[21]).toLocaleDateString()+"",h,P,y,p,G=r[20].__html+"",ne,j,M;return{c(){e=b("div"),l=b("a"),t=b("img"),i=I(),u=b("div"),a=b("div"),c=b("b"),S=N(_),T=I(),C=b("span"),B=N(R),O=N(`
                  commented on `),h=N(D),y=I(),p=b("div"),this.h()},l(w){e=d(w,"DIV",{class:!0});var k=v(e);l=d(k,"A",{class:!0,href:!0,target:!0,rel:!0});var W=v(l);t=d(W,"IMG",{src:!0,alt:!0,class:!0}),W.forEach(f),i=U(k),u=d(k,"DIV",{class:!0});var L=v(u);a=d(L,"DIV",{class:!0});var z=v(a);c=d(z,"B",{class:!0});var V=v(c);S=A(V,_),T=U(V),C=d(V,"SPAN",{class:!0});var q=v(C);B=A(q,R),O=A(q,`
                  commented on `),h=A(q,D),q.forEach(f),V.forEach(f),z.forEach(f),y=U(L),p=d(L,"DIV",{class:!0});var oe=v(p);oe.forEach(f),L.forEach(f),k.forEach(f),this.h()},h(){J(t.src,n=r[19].avatarUrl)||m(t,"src",n),m(t,"alt",o=`Avatar of ${r[19].username}`),m(t,"class","svelte-1fblg6g"),m(l,"class","github-issue-comments__comment-user-avatar svelte-1fblg6g"),m(l,"href",s=`https://github.com/${r[19].username}`),m(l,"target","_blank"),m(l,"rel","noopener noreferrer"),m(C,"class","svelte-1fblg6g"),m(c,"class","github-issue-comments__comment-box-header-username svelte-1fblg6g"),m(a,"class",P=K(r[19].isRepositoryOwner?"github-issue-comments__comment-box-header github-issue-comments__comment-box-header--is-owner":"github-issue-comments__comment-box-header")+" svelte-1fblg6g"),m(p,"class","github-issue-comments__comment-box-body svelte-1fblg6g"),m(u,"class","github-issue-comments__comment-box svelte-1fblg6g"),m(e,"class","github-issue-comments__comment svelte-1fblg6g")},m(w,k){E(w,e,k),g(e,l),g(l,t),g(e,i),g(e,u),g(u,a),g(a,c),g(c,S),g(c,T),g(c,C),g(C,B),g(C,O),g(C,h),g(u,y),g(u,p),p.innerHTML=G,j||(M=ce(ne=r[10].call(null,p)),j=!0)},p(w,k){k&32&&!J(t.src,n=w[19].avatarUrl)&&m(t,"src",n),k&32&&o!==(o=`Avatar of ${w[19].username}`)&&m(t,"alt",o),k&32&&s!==(s=`https://github.com/${w[19].username}`)&&m(l,"href",s),k&32&&_!==(_=w[19].username+"")&&Q(S,_),k&32&&D!==(D=new Date(w[21]).toLocaleDateString()+"")&&Q(h,D),k&32&&P!==(P=K(w[19].isRepositoryOwner?"github-issue-comments__comment-box-header github-issue-comments__comment-box-header--is-owner":"github-issue-comments__comment-box-header")+" svelte-1fblg6g")&&m(a,"class",P),k&32&&G!==(G=w[20].__html+"")&&(p.innerHTML=G)},d(w){w&&f(e),j=!1,M()}}}function ee(r){let e,l=Array(r[8]),t=[];for(let n=0;n<l.length;n+=1)t[n]=te(Y(r,l,n));return{c(){e=b("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=d(n,"DIV",{class:!0});var o=v(e);for(let s=0;s<t.length;s+=1)t[s].l(o);o.forEach(f),this.h()},h(){m(e,"class","github-issue-comments__pagination svelte-1fblg6g")},m(n,o){E(n,e,o);for(let s=0;s<t.length;s+=1)t[s].m(e,null)},p(n,o){if(o&272){l=Array(n[8]);let s;for(s=0;s<l.length;s+=1){const i=Y(n,l,s);t[s]?t[s].p(i,o):(t[s]=te(i),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=l.length}},d(n){n&&f(e),le(t,n)}}}function te(r){let e,l=r[18]+1+"",t,n,o,s,i;function u(){return r[13](r[18])}return{c(){e=b("button"),t=N(l),n=I(),this.h()},l(a){e=d(a,"BUTTON",{class:!0});var c=v(e);t=A(c,l),n=U(c),c.forEach(f),this.h()},h(){m(e,"class",o="github-issue-comments__pagination-button "+(r[4]===r[18]+1&&"github-issue-comments__pagination-button-active")+" svelte-1fblg6g")},m(a,c){E(a,e,c),g(e,t),g(e,n),s||(i=F(e,"click",u),s=!0)},p(a,c){r=a,c&16&&o!==(o="github-issue-comments__pagination-button "+(r[4]===r[18]+1&&"github-issue-comments__pagination-button-active")+" svelte-1fblg6g")&&m(e,"class",o)},d(a){a&&f(e),s=!1,i()}}}function se(r){let e,l,t,n;return{c(){e=b("button"),l=N("Check for new comments"),this.h()},l(o){e=d(o,"BUTTON",{class:!0});var s=v(e);l=A(s,"Check for new comments"),s.forEach(f),this.h()},h(){m(e,"class","github-issue-comments__refresh-comments-button svelte-1fblg6g"),e.disabled=r[7]},m(o,s){E(o,e,s),g(e,l),t||(n=F(e,"click",r[9]),t=!0)},p(o,s){s&128&&(e.disabled=o[7])},d(o){o&&f(e),t=!1,n()}}}function ge(r){let e;function l(o,s){return o[2]?fe:me}let t=l(r),n=t(r);return{c(){e=b("section"),n.c(),this.h()},l(o){e=d(o,"SECTION",{class:!0});var s=v(e);n.l(s),s.forEach(f),this.h()},h(){m(e,"class","github-issue-comments svelte-1fblg6g")},m(o,s){E(o,e,s),n.m(e,null)},p(o,[s]){t===(t=l(o))&&n?n.p(o,s):(n.d(1),n=t(o),n&&(n.c(),n.m(e,null)))},i:H,o:H,d(o){o&&f(e),n.d()}}}function be(r,e,l){let t,{issueUri:n=""}=e,{useShowCommentsButton:o=!0}=e,{allowRefreshingComments:s=!0}=e,{commentsPerPage:i=100}=e,u=!o,a=[],c=!1,_=null,S=1,T=!1;const C=async()=>{l(6,c=!1);try{const h=await fetch(`https://api.github.com/repos/${n}/comments?page=${S}&per_page=${i}`,{method:"GET",headers:{Accept:"application/vnd.github.v3.html+json"}}),P=h.headers.get("link");P&&l(3,_=ue(P));const y=await h.json();if(y.message==="Not Found")throw Error(`The issueUri: "${n}" doesn't exist`);if(y.message)throw Error(y.message);l(5,a=y.map(p=>({body:{__html:p.body_html},user:{username:p.user.login,avatarUrl:p.user.avatar_url,isRepositoryOwner:p.author_association==="OWNER"},createdAt:p.created_at}))),l(6,c=!0)}catch(h){console.error(h)}},R=()=>{l(7,T=!0),C(),setTimeout(()=>l(7,T=!1),1e3)},B=h=>{h!==null&&[h.querySelector(".email-hidden-toggle"),h.querySelector(".email-hidden-reply")].forEach(y=>{y&&h.removeChild(y)})},O=h=>{l(4,S=h+1)},D=()=>l(2,u=!0);return r.$$set=h=>{"issueUri"in h&&l(0,n=h.issueUri),"useShowCommentsButton"in h&&l(11,o=h.useShowCommentsButton),"allowRefreshingComments"in h&&l(1,s=h.allowRefreshingComments),"commentsPerPage"in h&&l(12,i=h.commentsPerPage)},r.$$.update=()=>{r.$$.dirty&24&&l(8,t=_?.last?_.last:S),r.$$.dirty&21&&(u&&S||n)&&C()},[n,s,u,_,S,a,c,T,t,R,B,o,i,O,D]}class ve extends ie{constructor(e){super();re(this,e,be,ge,ae,{issueUri:0,useShowCommentsButton:11,allowRefreshingComments:1,commentsPerPage:12})}}export{ve as default};
